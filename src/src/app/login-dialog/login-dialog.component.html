@if(message){
    <mat-card class="backdrop-blur background">
        <mat-card-content class="align">
            {{message}}
        </mat-card-content>
        <mat-card-actions class="actions">
            @if(failed){
                <button mat-flat-button (click)="clearMessage()">Retry</button>
                <button mat-stroked-button (click)="close();">Close</button>
            } @else {
                @if(data.redirect){
                    <button mat-flat-button color="primary" (click)="close();navigate()">Play</button>
                }
                @if(data.offerSettings){
                    <button mat-flat-button (click)="close();navigate();openSettings()">Settings</button>
                }
                <button mat-stroked-button (click)="close();">Close</button>
            }
        </mat-card-actions>
    </mat-card>
} @else if(loadMessage !== undefined){
    <mat-card class="backdrop-blur background">
        <mat-card-content class="align">
            {{loadMessage}}
            <mat-progress-bar mode="indeterminate"></mat-progress-bar>
        </mat-card-content>
    </mat-card>
} @else if(!inSignUp){
    <mat-card class="backdrop-blur background">
        <mat-card-header class="align"><h1>Login</h1></mat-card-header>
        <mat-card-content>
            <form class="form" [formGroup]="loginForm">
                <mat-form-field>
                    <mat-label>Email</mat-label>
                    <input matInput
                        formControlName = "email"
                        required>
                </mat-form-field>
                <mat-form-field>
                    <mat-label>Password</mat-label>
                    <input matInput
                        [type]="( hidePassword ? 'password' : 'text' )"
                        formControlName = "password"
                        required>
                    <button matSuffix mat-icon-button (click)="this.hidePassword=!this.hidePassword;">
                        <mat-icon>{{( hidePassword? 'visibility_off' : 'visibility' )}}</mat-icon>
                    </button>
                </mat-form-field>
            </form>
        </mat-card-content>
        <mat-card-actions class="actions">
            <button mat-flat-button (click)="login()" color="primary">Login</button>
            <button mat-flat-button (click)="toSignUp()" color="accent">Sign Up Instead</button>
            <button mat-flat-button (click)="signInWithGoogle()">Google Sign In</button>
            <button mat-flat-button (click)="signInAnonymous()">Anonymous Sign In</button>
            <button mat-stroked-button (click)="close()">Close</button>
        </mat-card-actions>
    </mat-card>
} @else {
    <mat-card class="backdrop-blur background">
        <mat-card-header class="align"><h1>Sign Up</h1></mat-card-header>
        <mat-card-content>
            <form class="form" [formGroup]="signUpForm">
                <mat-form-field>
                    <mat-label>Email</mat-label>
                    <input matInput
                        formControlName = "email"
                        required>
                </mat-form-field>

                <mat-form-field>
                    <mat-label>Password</mat-label>
                    <input matInput
                        [type]="( hidePassword ? 'password' : 'text' )"
                        formControlName = "password"
                        required>
                    <button matSuffix mat-icon-button (click)="this.hidePassword=!this.hidePassword;">
                        <mat-icon>{{( hidePassword? 'visibility_off' : 'visibility' )}}</mat-icon>
                    </button>
                </mat-form-field>

                <mat-form-field>
                    <mat-label>Confirm password</mat-label>
                    <input matInput
                        [type]="( hideConfirmPassword ? 'password' : 'text' )"
                        formControlName = "confirmPassword"
                        required>
                    <button matSuffix mat-icon-button (click)="this.hideConfirmPassword=!this.hideConfirmPassword;">
                        <mat-icon>{{( hideConfirmPassword? 'visibility_off' : 'visibility' )}}</mat-icon>
                    </button>
                </mat-form-field>
            </form>
        </mat-card-content>
        <mat-card-actions class="actions">
            <button mat-flat-button (click)="register()" color="accent">Register</button>
            <button mat-flat-button (click)="toLogin()" color="primary">Login Instead</button>
            <button mat-flat-button (click)="signInWithGoogle()">Google Sign In</button>
            <button mat-flat-button (click)="signInAnonymous()">Anonymous Sign In</button>
            <button mat-stroked-button (click)="close()">Close</button>
        </mat-card-actions>
    </mat-card>
}